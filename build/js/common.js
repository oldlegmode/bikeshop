"use strict";function request(e){var t=new XMLHttpRequest;t.open("GET","/send",!0),t.send(e),t.onreadystatechange=function(){if(4==this.readyState)return 200!=this.status?void alert("ошибка: "+(this.status?this.statusText:"запрос не удался")):void 0}}function CustomValidation(){}CustomValidation.prototype={invalidities:[],checkValidity:function(e){var t=e.validity;if(t.patternMismatch&&this.addInvalidity("This is the wrong pattern for this field"),t.rangeOverflow){var n=getAttributeValue(e,"max");this.addInvalidity("The maximum value should be "+n)}if(t.rangeUnderflow){var i=getAttributeValue(e,"min");this.addInvalidity("The minimum value should be "+i)}if(t.stepMismatch){var a=getAttributeValue(e,"step");this.addInvalidity("This number needs to be a multiple of "+a)}},addInvalidity:function(e){this.invalidities.push(e)},getInvalidities:function(){return this.invalidities.join(". \n")}},CustomValidation.prototype.getInvaliditiesForHTML=function(){return this.invalidities.join(". <br>")};var submit=document.getElementById("contact-form-submit");submit.addEventListener("click",function(e){for(var t=new FormData(this.form),n=[],i=0;i<this.parentElement.length;i++)n.push(this.parentElement[i]);for(var i=0;i<n.length;i++){var a=n[i];if(0==a.checkValidity()){var s=new CustomValidation;s.checkValidity(a);var d=s.getInvalidities();a.setCustomValidity(d);var r=s.getInvaliditiesForHTML();r||(r="Required field"),a.insertAdjacentHTML("afterend",'<p class="page-main__error-message '+a.name+'">'+r+"</p>");var l=!0;setTimeout(function(){for(var e=document.querySelectorAll(".page-main__error-message"),t=0;t<e.length;t++)e[t].classList.add("animated"),e[t].classList.add("fadeOut")},2e3),setTimeout(function(){var e=document.querySelector(".page-main__error-message"),t=e.parentElement;t.removeChild.call(t,e)},3e3)}}l?e.preventDefault():(e.preventDefault(),request(t))}),function(e,t){var n=t.getElementById("logo-footer");n.addEventListener("click",function(e){t.body.hasAttribute("data-index-page")&&e.preventDefault()}),n.addEventListener("dblclick",function(e){if(t.body.hasAttribute("data-index-page"))return e.preventDefault(),!1})}(window,document),function(e,t){var n=t.getElementById("logo-header");n.addEventListener("click",function(e){t.body.hasAttribute("data-index-page")&&e.preventDefault()}),n.addEventListener("dblclick",function(e){if(t.body.hasAttribute("data-index-page"))return e.preventDefault(),!1}),t.addEventListener("DOMContentLoaded",function(e){n.firstElementChild.classList.add("animated"),n.firstElementChild.classList.add("fadeIn")})}(window,document),function(e,t){function n(e,n,i){function a(e,t,n){if(s(e)&&r(e)){if("false"===e.getAttribute("data-side"))return;return e.setAttribute("data-show","false"),void l(e,t,n)}if("false"==r(e)&&d(e)){if("true"===e.getAttribute("data-side"))return;e.setAttribute("data-show","true"),l(e,t,n)}}function s(e){var n=e.getBoundingClientRect(),i=e.offsetHeight/5,a=t.documentElement.clientHeight-e.offsetHeight/5,s=t.documentElement.clientHeight;return t.documentElement.clientWidth<992?n.top>=0&&n.bottom<=s:(n.top>i||n.bottom>i)&&n.top<a||s<e.offsetHeight&&n.top<0&&n.bottom>s}function d(e){var n=e.getBoundingClientRect(),i=e.offsetHeight/5,a=(e.offsetHeight,t.documentElement.clientHeight-e.offsetHeight/5),s=(t.documentElement.clientHeight,e.offsetHeight,t.documentElement.clientHeight);return t.documentElement.clientWidth<992?n.top<=0&&n.bottom<=0||n.top>=s&&n.bottom>=s:n.bottom<=i||n.top>=a}function r(e){return e.getAttribute("data-show")}function l(e,t,n){var t=t||"fadeIn",n=n||"fadeOut";if("true"!=e.getAttribute("data-show"))switch(e.getAttribute("data-side")){case"left":return e.classList.add("animated"),void e.classList.add("fadeInLeftBig");case"center":return e.classList.add("animated"),void e.classList.add("fadeIn");case"right":return e.classList.add("animated"),void e.classList.add("fadeInRightBig");default:e.classList.add(t),e.classList.add("animated")}else if("false"!=e.getAttribute("data-show"))switch(e.getAttribute("data-side")){case"left":return e.classList.remove("fadeInLeftBig"),void e.classList.add("fadeOutLeftBig");case"center":return e.classList.remove("fadeIn"),void e.classList.add("fadeOut");case"right":return e.classList.remove("fadeInRightBig"),void e.classList.add("fadeOutRightBig");default:e.classList.remove(t),e.classList.add(n)}}var e=[].slice.call(arguments),o=this;return a.apply(o,e)}var i,a=t.querySelectorAll(".categories-item"),s=t.querySelectorAll(".popular-item"),d=t.getElementById("contact-form"),r=t.querySelector(".page-main__contact-header"),l=t.querySelector(".page-main__contact-text");i=n.bind(this,d,"fadeIn","fadeOut"),d.style.opacity="0",t.addEventListener("load",i),t.addEventListener("scroll",i),i=n.bind(this,r,"fadeInLeft","fadeOutRight"),r.style.opacity="0",t.addEventListener("load",i),t.addEventListener("scroll",i),i=n.bind(this,l,"fadeInRight","fadeOutLeft"),l.style.opacity="0",t.addEventListener("load",i),t.addEventListener("scroll",i);for(var o=0;o<a.length;o++)i=n.bind(this,a[o]),a[o].style.opacity="0",t.addEventListener("load",i),t.addEventListener("scroll",i);for(var o=0;o<s.length;o++)i=n.bind(this,s[o]),s[o].style.opacity="0",t.addEventListener("load",i),t.addEventListener("scroll",i)}(window,document),this.Element&&Element.prototype.attachEvent&&!Element.prototype.addEventListener&&function(){function e(e,t){Window.prototype[e]=HTMLDocument.prototype[e]=Element.prototype[e]=t}function t(e){t.interval&&document.body&&(t.interval=clearInterval(t.interval),document.dispatchEvent(new CustomEvent("DOMContentLoaded")))}e("addEventListener",function(e,t){var n=this,i=n.addEventListener.listeners=n.addEventListener.listeners||{},a=i[e]=i[e]||[];a.length||n.attachEvent("on"+e,a.event=function(e){var t=n.document&&n.document.documentElement||n.documentElement||{scrollLeft:0,scrollTop:0};e.currentTarget=n,e.pageX=e.clientX+t.scrollLeft,e.pageY=e.clientY+t.scrollTop,e.preventDefault=function(){e.returnValue=!1},e.relatedTarget=e.fromElement||null,e.stopImmediatePropagation=function(){l=!1,e.cancelBubble=!0},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||n,e.timeStamp=+new Date;var i={};for(var s in e)i[s]=e[s];for(var d,s=0,r=[].concat(a),l=!0;l&&(d=r[s]);++s)for(var o,c=0;o=a[c];++c)if(o==d){o.call(n,i);break}}),a.push(t)}),e("removeEventListener",function(e,t){for(var n,i=this,a=i.addEventListener.listeners=i.addEventListener.listeners||{},s=a[e]=a[e]||[],d=s.length-1;n=s[d];--d)if(n==t){s.splice(d,1);break}!s.length&&s.event&&i.detachEvent("on"+e,s.event)}),e("dispatchEvent",function(e){var t=this,n=e.type,i=t.addEventListener.listeners=t.addEventListener.listeners||{},a=i[n]=i[n]||[];try{return t.fireEvent("on"+n,e)}catch(t){return void(a.event&&a.event(e))}}),Object.defineProperty(Window.prototype,"CustomEvent",{get:function(){var e=this;return function(t,n){var i,a=e.document.createEventObject();a.type=t;for(i in n)"cancelable"==i?a.returnValue=!n.cancelable:"bubbles"==i?a.cancelBubble=!n.bubbles:"detail"==i&&(a.detail=n.detail);return a}}}),t.interval=setInterval(t,1),window.addEventListener("load",t)}(),(!this.CustomEvent||"object"==typeof this.CustomEvent)&&function(){this.CustomEvent=function(e,t){var n;t=t||{bubbles:!1,cancelable:!1,detail:void 0};try{n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail)}catch(i){n=document.createEvent("Event"),n.initEvent(e,t.bubbles,t.cancelable),n.detail=t.detail}return n}}(),function(e,t){function n(e){e.preventDefault();var n=e.target;t.getElementById("site-nav-toggle");if(!(t.documentElement.clientWidth<750||l))for(;"UL"!=n.tagName;){if(n.hasAttribute("data-nav-li")){n.firstElementChild.classList.add("site-nav__link--active"),a(n),s(n,"fadeIn"),l=n;break}n=n.parentElement}}function i(e){e.preventDefault();var t=e.relatedTarget;if(l){for(;t;){if(t==l)return;t=t.parentElement}l.firstElementChild.classList.remove("site-nav__link--active"),a(l),d(l,"fadeIn"),l=null}}function a(e){var t=0;if(o)for(;e.children[t];){if("UL"==e.children[t].tagName){e.children[t].classList.remove("site-nav__sub-list--active"),o=!1;break}t++}else for(;e.children[t];){if("UL"==e.children[t].tagName){e.children[t].classList.add("site-nav__sub-list--active"),o=!0;break}t++}}function s(e,t){e.classList.add(t),e.classList.add("animated")}function d(e,t){e.classList.remove(t)}var r=t.querySelector(".site-nav__list"),l=null,o=!1;r.addEventListener("mouseover",n),r.addEventListener("mouseout",i)}(window,document),function(e,t){function n(e){function t(e){function t(e,t){e.classList.remove("animated"),e.classList.remove(t)}return function(n,i){var a=this,s=arguments;setTimeout(function(){t.apply(a,s)},e)}}e.preventDefault();var n=t(700),i=t(700);this.previousElementSibling.classList.toggle("site-nav__list--hidden-sm"),this.previousElementSibling.classList.toggle("animated"),this.previousElementSibling.classList.toggle("fadeInRight--site-nav"),n(this.previousElementSibling,"fadeInRight--site-nav"),this.classList.toggle("animated"),this.classList.toggle("pulse--site-nav"),this.classList.toggle("site-nav__toggle--active"),i(this,"pulse--site-nav")}var i=t.getElementById("site-nav-toggle");t.getElementById("site-nav-list");i.addEventListener("click",n)}(window,document),function(e,t){function n(e){if(e.preventDefault(),this.classList.contains("slider-header__toggle--next"))for(var t=0;t<r.length;t++){if(!r[t].classList.contains("slider-header__content--hidden")&&t===r.length-1)return r[t].classList.add("slider-header__content--hidden"),void r[0].classList.remove("slider-header__content--hidden");if(!r[t].classList.contains("slider-header__content--hidden"))return r[t].classList.add("slider-header__content--hidden"),void r[++t].classList.remove("slider-header__content--hidden")}if(this.classList.contains("slider-header__toggle--prev"))for(var t=r.length-1;t>=0;t--){if(!r[t].classList.contains("slider-header__content--hidden")&&0===t)return r[t].classList.add("slider-header__content--hidden"),void r[r.length-1].classList.remove("slider-header__content--hidden");if(!r[t].classList.contains("slider-header__content--hidden"))return r[t].classList.add("slider-header__content--hidden"),void r[--t].classList.remove("slider-header__content--hidden")}}var i=t.querySelectorAll(".slider-header__header"),a=t.querySelectorAll(".slider-header__text"),s=t.querySelectorAll(".slider-header__btn"),d=t.querySelectorAll(".slider-header__toggle"),r=t.querySelectorAll("[id^=slider-header__content-]");t.addEventListener("DOMContentLoaded",function(){for(var e=0;e<d.length;e++)d[e].classList.add("animated"),d[e].classList.add("fadeInDownBig"),d[e].addEventListener("click",n),d[e].addEventListener("mouseover",function(e){this.classList.remove("fadeInDownBig")})}),t.addEventListener("DOMContentLoaded",function(){for(var e=0;e<i.length;e++)i[e].classList.add("animated"),i[e].classList.add("fadeInDown")}),t.addEventListener("DOMContentLoaded",function(){for(var e=0;e<a.length;e++)a[e].classList.add("animated"),a[e].classList.add("fadeInUp")}),t.addEventListener("DOMContentLoaded",function(){for(var e=0;e<s.length;e++)s[e].classList.add("animated"),s[e].classList.add("fadeInUp")})}(window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm0tdmFsaWRhdGlvbi5qcyIsImxvZ28tZm9vdGVyLmpzIiwibG9nby1oZWFkLmpzIiwibWFpbi1hbmltYXRpb24uanMiLCJwb2x5ZmlsbC1ET01Db250ZW50TG9hZGVkLmpzIiwic2lyZS1uYXYuanMiLCJzaXRlLW5hdi1kcm9wZG93bi5qcyIsInNsaWRlci1oZWFkZXIuanMiXSwibmFtZXMiOlsicmVxdWVzdCIsImFyZ3VtZW50IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2VuZCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInRoaXMiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwiYWxlcnQiLCJzdGF0dXNUZXh0IiwiQ3VzdG9tVmFsaWRhdGlvbiIsInByb3RvdHlwZSIsImludmFsaWRpdGllcyIsImNoZWNrVmFsaWRpdHkiLCJpbnB1dCIsInZhbGlkaXR5IiwicGF0dGVybk1pc21hdGNoIiwiYWRkSW52YWxpZGl0eSIsInJhbmdlT3ZlcmZsb3ciLCJtYXgiLCJnZXRBdHRyaWJ1dGVWYWx1ZSIsInJhbmdlVW5kZXJmbG93IiwibWluIiwic3RlcE1pc21hdGNoIiwic3RlcCIsIm1lc3NhZ2UiLCJwdXNoIiwiZ2V0SW52YWxpZGl0aWVzIiwiam9pbiIsImdldEludmFsaWRpdGllc0ZvckhUTUwiLCJzdWJtaXQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiZm9ybSIsImlucHV0cyIsImkiLCJwYXJlbnRFbGVtZW50IiwibGVuZ3RoIiwiaW5wdXRDdXN0b21WYWxpZGF0aW9uIiwiY3VzdG9tVmFsaWRpdHlNZXNzYWdlIiwic2V0Q3VzdG9tVmFsaWRpdHkiLCJjdXN0b21WYWxpZGl0eU1lc3NhZ2VGb3JIVE1MIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwibmFtZSIsInN0b3BTdWJtaXQiLCJzZXRUaW1lb3V0IiwibWVzc2FnZUVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImNsYXNzTGlzdCIsImFkZCIsIm1lc3NhZ2VFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImxhYmVsIiwicmVtb3ZlQ2hpbGQiLCJjYWxsIiwicHJldmVudERlZmF1bHQiLCJ3aW5kb3ciLCJsb2dvTGluayIsImJvZHkiLCJoYXNBdHRyaWJ1dGUiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImhhbmRsZXIiLCJzYXZlQXJnIiwib25lQ2xhc3NJbiIsIm9uZUNsYXNzT3V0Iiwic3RhcnQiLCJpbkRpc3BsYXkiLCJpc1Nob3ciLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJhbmltYXRlZCIsIm91dERpc3BsYXkiLCJlbGVtIiwiY29vcmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wQXJlYSIsIm9mZnNldEhlaWdodCIsImJvdHRvbUFyZWEiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRIZWlnaHQiLCJoZWlnaHQiLCJjbGllbnRXaWR0aCIsInRvcCIsImJvdHRvbSIsInJlbW92ZSIsInNsaWNlIiwiYXJndW1lbnRzIiwic2F2ZVRoaXMiLCJhcHBseSIsImVsZW1IYW5kbGVyIiwiZWxlbUNhdGVnb3JpZXMiLCJlbGVtUG9wdWxhciIsImZvcm1IZWFkZXIiLCJmb3JtVGV4dCIsImJpbmQiLCJzdHlsZSIsIm9wYWNpdHkiLCJFbGVtZW50IiwiYXR0YWNoRXZlbnQiLCJhZGRUb1Byb3RvdHlwZSIsIm1ldGhvZCIsIldpbmRvdyIsIkhUTUxEb2N1bWVudCIsInJlYWR5IiwiZXZlbnQiLCJpbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJ0eXBlIiwibGlzdGVuZXIiLCJ0YXJnZXQiLCJsaXN0ZW5lcnMiLCJ0eXBlTGlzdGVuZXJzIiwic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCIsImN1cnJlbnRUYXJnZXQiLCJwYWdlWCIsImNsaWVudFgiLCJwYWdlWSIsImNsaWVudFkiLCJyZXR1cm5WYWx1ZSIsInJlbGF0ZWRUYXJnZXQiLCJmcm9tRWxlbWVudCIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImltbWVkaWF0ZVByb3BhZ2F0aW9uIiwiY2FuY2VsQnViYmxlIiwic3RvcFByb3BhZ2F0aW9uIiwic3JjRWxlbWVudCIsInRpbWVTdGFtcCIsIkRhdGUiLCJwbGFpbkV2dCIsInR5cGVMaXN0ZW5lckNhY2hlIiwidHlwZUxpc3RlbmVyc0NhY2hlIiwiY29uY2F0IiwidHlwZUxpc3RlbmVyIiwiaWkiLCJzcGxpY2UiLCJkZXRhY2hFdmVudCIsImV2ZW50T2JqZWN0IiwiZmlyZUV2ZW50IiwiZXJyb3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsInNlbGYiLCJldmVudEluaXREaWN0Iiwia2V5IiwiY3JlYXRlRXZlbnRPYmplY3QiLCJjYW5jZWxhYmxlIiwiYnViYmxlcyIsImRldGFpbCIsInNldEludGVydmFsIiwidW5kZWZpbmVkIiwiY3JlYXRlRXZlbnQiLCJpbml0Q3VzdG9tRXZlbnQiLCJpbml0RXZlbnQiLCJob3ZlclNpdGVOYXZPdmVyIiwicmVtZWJlckVsZW1lbnQiLCJ0YWdOYW1lIiwic3ViTWVudVRvZ2dsZSIsImFuaW1hdGVBZGQiLCJob3ZlclNpdGVOYXZPdXQiLCJhbmltYXRlUmVtb3ZlIiwicGFyZW50Iiwic3ViTWVudVN0YXR1cyIsImNoaWxkcmVuIiwiYW5pbWF0ZU5hbWUiLCJsaXN0IiwicmVtb3ZlQW5pbWF0aW9uIiwidGltZXIiLCJmIiwiYXJnIiwic3RyIiwicmVtb3ZlTGlzdEFuaW1hdGUiLCJyZW1vdmVEaXZBbmltYXRlIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInRvZ2dsZSIsImRpdiIsImNvbnRlbnRQcmV2TmV4dFRvZ2dsZSIsImNvbnRhaW5zIiwiYXJyQ29udGVudEVsZW1lbnRzIiwic2xpZGVySGVhZGVyIiwic2xpZGVyVGV4dCIsInNsaWRlckJ0blN1Ym1pdCIsInNsaWRlclRhYnMiXSwibWFwcGluZ3MiOiJBQUNBLFlBRUEsU0FBQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFB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LElBQUEsWUFDQXNJLEVBQUFwSixHQUFBYSxVQUFBQyxJQUFBLGNBR0F0QixFQUFBRSxpQkFBQSxtQkFBQSxXQUNBLElBQUEsR0FBQU0sR0FBQSxFQUFBQSxFQUFBcUosRUFBQW5KLE9BQUFGLElBQ0FxSixFQUFBckosR0FBQWEsVUFBQUMsSUFBQSxZQUNBdUksRUFBQXJKLEdBQUFhLFVBQUFDLElBQUEsZUFtQ0FPLE9BQUE3QiIsImZpbGUiOiJjb21tb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuJ3VzZSBzdHJpY3QnXHJcblxyXG5mdW5jdGlvbiByZXF1ZXN0KGFyZ3VtZW50KSB7XHJcbiAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICB4aHIub3BlbignR0VUJywgJy9zZW5kJywgdHJ1ZSk7XHJcblxyXG4gIHhoci5zZW5kKGFyZ3VtZW50KTtcclxuXHJcbiAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSAhPSA0KSB7XHJcbiAgICAgIHJldHVybjsvLyDQv9C+INC+0LrQvtC90YfQsNC90LjQuCDQt9Cw0L/RgNC+0YHQsCDQtNC+0YHRgtGD0L/QvdGLOlxyXG4gICAgfVxyXG4gICAgLy8gc3RhdHVzLCBzdGF0dXNUZXh0XHJcbiAgICAvLyByZXNwb25zZVRleHQsIHJlc3BvbnNlWE1MICjQv9GA0LggY29udGVudC10eXBlOiB0ZXh0L3htbClcclxuICAgIGlmICh0aGlzLnN0YXR1cyAhPSAyMDApIHtcclxuICAgICAgLy8g0L7QsdGA0LDQsdC+0YLQsNGC0Ywg0L7RiNC40LHQutGDXHJcbiAgICAgIGFsZXJ0KCAn0L7RiNC40LHQutCwOiAnICsgKHRoaXMuc3RhdHVzID8gdGhpcy5zdGF0dXNUZXh0IDogJ9C30LDQv9GA0L7RgSDQvdC1INGD0LTQsNC70YHRjycpICk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEN1c3RvbVZhbGlkYXRpb24oKSB7IH1cclxuXHJcbkN1c3RvbVZhbGlkYXRpb24ucHJvdG90eXBlID0ge1xyXG4gIC8vINCj0YHRgtCw0L3QvtCy0LjQvCDQv9GD0YHRgtC+0Lkg0LzQsNGB0YHQuNCyINGB0L7QvtCx0YnQtdC90LjQuSDQvtCxINC+0YjQuNCx0LrQsNGFXHJcbiAgaW52YWxpZGl0aWVzOiBbXSxcclxuXHJcbiAgLy8g0JzQtdGC0L7QtCwg0L/RgNC+0LLQtdGA0Y/RjtGJ0LjQuSDQstCw0LvQuNC00L3QvtGB0YLRjFxyXG4gIGNoZWNrVmFsaWRpdHk6IGZ1bmN0aW9uKGlucHV0KSB7XHJcblxyXG4gICAgdmFyIHZhbGlkaXR5ID0gaW5wdXQudmFsaWRpdHk7XHJcblxyXG4gICAgaWYgKHZhbGlkaXR5LnBhdHRlcm5NaXNtYXRjaCkge1xyXG4gICAgICB0aGlzLmFkZEludmFsaWRpdHkoJ1RoaXMgaXMgdGhlIHdyb25nIHBhdHRlcm4gZm9yIHRoaXMgZmllbGQnKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodmFsaWRpdHkucmFuZ2VPdmVyZmxvdykge1xyXG4gICAgICB2YXIgbWF4ID0gZ2V0QXR0cmlidXRlVmFsdWUoaW5wdXQsICdtYXgnKTtcclxuICAgICAgdGhpcy5hZGRJbnZhbGlkaXR5KCdUaGUgbWF4aW11bSB2YWx1ZSBzaG91bGQgYmUgJyArIG1heCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHZhbGlkaXR5LnJhbmdlVW5kZXJmbG93KSB7XHJcbiAgICAgIHZhciBtaW4gPSBnZXRBdHRyaWJ1dGVWYWx1ZShpbnB1dCwgJ21pbicpO1xyXG4gICAgICB0aGlzLmFkZEludmFsaWRpdHkoJ1RoZSBtaW5pbXVtIHZhbHVlIHNob3VsZCBiZSAnICsgbWluKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodmFsaWRpdHkuc3RlcE1pc21hdGNoKSB7XHJcbiAgICAgIHZhciBzdGVwID0gZ2V0QXR0cmlidXRlVmFsdWUoaW5wdXQsICdzdGVwJyk7XHJcbiAgICAgIHRoaXMuYWRkSW52YWxpZGl0eSgnVGhpcyBudW1iZXIgbmVlZHMgdG8gYmUgYSBtdWx0aXBsZSBvZiAnICsgc3RlcCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0Jgg0L7RgdGC0LDQu9GM0L3Ri9C1INC/0YDQvtCy0LXRgNC60Lgg0LLQsNC70LjQtNC90L7RgdGC0LguLi5cclxuICB9LFxyXG5cclxuICAvLyDQlNC+0LHQsNCy0LvRj9C10Lwg0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1INCyINC80LDRgdGB0LjQsiDQvtGI0LjQsdC+0LpcclxuICBhZGRJbnZhbGlkaXR5OiBmdW5jdGlvbihtZXNzYWdlKSB7XHJcbiAgICB0aGlzLmludmFsaWRpdGllcy5wdXNoKG1lc3NhZ2UpO1xyXG4gIH0sXHJcblxyXG4gIC8vINCf0L7Qu9GD0YfQsNC10Lwg0L7QsdGJ0LjQuSDRgtC10LrRgdGCINGB0L7QvtCx0YnQtdC90LjQuSDQvtCxINC+0YjQuNCx0LrQsNGFXHJcbiAgZ2V0SW52YWxpZGl0aWVzOiBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmludmFsaWRpdGllcy5qb2luKCcuIFxcbicpO1xyXG4gIH1cclxufTtcclxuXHJcbkN1c3RvbVZhbGlkYXRpb24ucHJvdG90eXBlLmdldEludmFsaWRpdGllc0ZvckhUTUwgPSBmdW5jdGlvbigpIHtcclxuICByZXR1cm4gdGhpcy5pbnZhbGlkaXRpZXMuam9pbignLiA8YnI+Jyk7XHJcbn1cclxuXHJcbnZhciBzdWJtaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFjdC1mb3JtLXN1Ym1pdCcpO1xyXG5cclxuLy8g0JTQvtCx0LDQstC70Y/QtdC8INC+0LHRgNCw0LHQvtGC0YfQuNC6INC60LvQuNC60LAg0L3QsCDQutC90L7Qv9C60YMg0L7RgtC/0YDQsNCy0LrQuCDRhNC+0YDQvNGLXHJcbnN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICB2YXIgZm9ybURhdGEgID0gbmV3IEZvcm1EYXRhKHRoaXMuZm9ybSk7XHJcbiAgdmFyIGlucHV0cyA9IFtdO1xyXG5cclxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGFyZW50RWxlbWVudC5sZW5ndGg7IGkrKykge1xyXG4gICAgaW5wdXRzLnB1c2godGhpcy5wYXJlbnRFbGVtZW50W2ldKTtcclxuXHJcbiAgfVxyXG4gIC8vINCf0YDQvtC50LTRkdC80YHRjyDQv9C+INCy0YHQtdC8INC/0L7Qu9GP0LxcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0cy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgIHZhciBpbnB1dCA9IGlucHV0c1tpXTtcclxuICAgIC8vINCf0YDQvtCy0LXRgNC40Lwg0LLQsNC70LjQtNC90L7RgdGC0Ywg0L/QvtC70Y8sINC40YHQv9C+0LvRjNC30YPRjyDQstGB0YLRgNC+0LXQvdC90YPRjiDQsiBKYXZhU2NyaXB0INGE0YPQvdC60YbQuNGOIGNoZWNrVmFsaWRpdHkoKVxyXG4gICAgaWYgKGlucHV0LmNoZWNrVmFsaWRpdHkoKSA9PSBmYWxzZSkge1xyXG5cclxuICAgICAgdmFyIGlucHV0Q3VzdG9tVmFsaWRhdGlvbiA9IG5ldyBDdXN0b21WYWxpZGF0aW9uKCk7IC8vINCh0L7Qt9C00LDQtNC40Lwg0L7QsdGK0LXQutGCIEN1c3RvbVZhbGlkYXRpb25cclxuICAgICAgaW5wdXRDdXN0b21WYWxpZGF0aW9uLmNoZWNrVmFsaWRpdHkoaW5wdXQpOyAvLyDQktGL0Y/QstC40Lwg0L7RiNC40LHQutC4XHJcbiAgICAgIHZhciBjdXN0b21WYWxpZGl0eU1lc3NhZ2UgPSBpbnB1dEN1c3RvbVZhbGlkYXRpb24uZ2V0SW52YWxpZGl0aWVzKCk7IC8vINCf0L7Qu9GD0YfQuNC8INCy0YHQtSDRgdC+0L7QsdGJ0LXQvdC40Y8g0L7QsSDQvtGI0LjQsdC60LDRhVxyXG4gICAgICBpbnB1dC5zZXRDdXN0b21WYWxpZGl0eShjdXN0b21WYWxpZGl0eU1lc3NhZ2UpOyAvLyDQo9GB0YLQsNC90L7QstC40Lwg0YHQv9C10YbQuNCw0LvRjNC90L7QtSDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LVcclxuXHJcbiAgICAgIC8vINCU0L7QsdCw0LLQuNC8INC+0YjQuNCx0LrQuCDQsiDQtNC+0LrRg9C80LXQvdGCXHJcbiAgICAgIHZhciBjdXN0b21WYWxpZGl0eU1lc3NhZ2VGb3JIVE1MID0gaW5wdXRDdXN0b21WYWxpZGF0aW9uLmdldEludmFsaWRpdGllc0ZvckhUTUwoKTtcclxuICAgICAgLy8g0JXRgdC70Lgg0L/QvtC70LUg0L/Rg9GB0YLQvtC1XHJcbiAgICAgIGlmICghY3VzdG9tVmFsaWRpdHlNZXNzYWdlRm9ySFRNTCkge1xyXG4gICAgICAgIGN1c3RvbVZhbGlkaXR5TWVzc2FnZUZvckhUTUwgPSdSZXF1aXJlZCBmaWVsZCc7XHJcbiAgICAgIH1cclxuICAgICAgaW5wdXQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsICc8cCBjbGFzcz1cInBhZ2UtbWFpbl9fZXJyb3ItbWVzc2FnZSAnICsgaW5wdXQubmFtZSArICdcIj4nICsgY3VzdG9tVmFsaWRpdHlNZXNzYWdlRm9ySFRNTCArICc8L3A+JylcclxuICAgICAgdmFyIHN0b3BTdWJtaXQgPSB0cnVlO1xyXG4gICAgICAvL9CX0LDQv9GD0YHRgtC40Lwg0LDQvdC40LzQsNGG0LjRjiDRh9C10YDQtdC3IDIg0YHQtdC60YPQvdC00YtcclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2VFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYWdlLW1haW5fX2Vycm9yLW1lc3NhZ2UnKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2VFbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgbWVzc2FnZUVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGVkJyk7XHJcbiAgICAgICAgICBtZXNzYWdlRWxlbWVudHNbaV0uY2xhc3NMaXN0LmFkZCgnZmFkZU91dCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwyMDAwKTtcclxuICAgICAgLy/Qo9C00LDQu9C40Lwg0YfQtdGA0LXQtyAzINGB0LXQutGD0L3QtNGLXHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdmFyIG1lc3NhZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UtbWFpbl9fZXJyb3ItbWVzc2FnZScpO1xyXG4gICAgICAgICAgdmFyIGxhYmVsID0gbWVzc2FnZUVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgIGxhYmVsLnJlbW92ZUNoaWxkLmNhbGwobGFiZWwsIG1lc3NhZ2VFbGVtZW50KTtcclxuICAgICAgICB9LDMwMDApO1xyXG4gICAgfSAvLyDQt9Cw0LrQvtC90YfQuNC70YHRjyBpZlxyXG4gICAgXHJcbiAgfSAvLyDQt9Cw0LrQvtC90YfQuNC70YHRjyDRhtC40LrQu1xyXG5cclxuICBpZiAoc3RvcFN1Ym1pdCkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0gZWxzZSAge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZm9ybURhdGE7XHJcbiAgICByZXF1ZXN0KGZvcm1EYXRhICk7XHJcbiAgfVxyXG59KTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwiOyhmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCkge1xyXG4gICd1c2Ugc3RyaWN0J1xyXG5cclxuICB2YXIgbG9nb0xpbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nby1mb290ZXInKTtcclxuICBcclxuXHJcbiAgbG9nb0xpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgaWYgKGRvY3VtZW50LmJvZHkuaGFzQXR0cmlidXRlKCdkYXRhLWluZGV4LXBhZ2UnKSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7ICBcclxuICAgIH1cclxuICB9KTtcclxuICBsb2dvTGluay5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBpZiAoZG9jdW1lbnQuYm9keS5oYXNBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgtcGFnZScpKSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59KSh3aW5kb3csIGRvY3VtZW50KTsiLCI7KGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50KSB7XHJcbiAgJ3VzZSBzdHJpY3QnXHJcblxyXG4gIHZhciBsb2dvTGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvLWhlYWRlcicpO1xyXG4gIFxyXG5cclxuICBsb2dvTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBpZiAoZG9jdW1lbnQuYm9keS5oYXNBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgtcGFnZScpKSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTsgIFxyXG4gICAgfVxyXG4gIH0pO1xyXG4gIGxvZ29MaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGlmIChkb2N1bWVudC5ib2R5Lmhhc0F0dHJpYnV0ZSgnZGF0YS1pbmRleC1wYWdlJykpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBsb2dvTGluay5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuYWRkKCdhbmltYXRlZCcpXHJcbiAgICBsb2dvTGluay5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuYWRkKCdmYWRlSW4nKTtcclxuICB9KTtcclxufSkod2luZG93LCBkb2N1bWVudCk7IiwiOyhmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCl7XHJcbiAgJ3VzZSBzdHJpY3QnXHJcblxyXG4gIHZhciBlbGVtSGFuZGxlcjtcclxuICB2YXIgZWxlbUNhdGVnb3JpZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2F0ZWdvcmllcy1pdGVtJyk7XHJcbiAgdmFyIGVsZW1Qb3B1bGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVsYXItaXRlbScpO1xyXG4gIHZhciBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhY3QtZm9ybScpO1xyXG4gIHZhciBmb3JtSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UtbWFpbl9fY29udGFjdC1oZWFkZXInKTtcclxuICB2YXIgZm9ybVRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZS1tYWluX19jb250YWN0LXRleHQnKTtcclxuLy/QtdGB0LvQuCDRjdC70LXQvNC10L3RgiDQvtC00LjQvSDRgtC+INC90LXQvtCx0YXQvtC00LjQvNC+INC+0LHRj9C30LDRgtC10LvRjNC90L4g0L/QtdGA0LXQtNCw0YLRjCDQtdGJ0LUg0LTQstCwINGN0LvQtdC80LXQvdGC0LAsINC40LvQuCDRg9C60LDQt9Cw0YLRjCBkYXRhLXNpZGVcclxuICAgIGVsZW1IYW5kbGVyID0gaGFuZGxlci5iaW5kKHRoaXMsIGZvcm0sICdmYWRlSW4nLCAnZmFkZU91dCcpO1xyXG4gICAgZm9ybS5zdHlsZS5vcGFjaXR5ID0gJzAnO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGVsZW1IYW5kbGVyKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGVsZW1IYW5kbGVyKTtcclxuXHJcbiAgICBlbGVtSGFuZGxlciA9IGhhbmRsZXIuYmluZCh0aGlzLCBmb3JtSGVhZGVyLCAnZmFkZUluTGVmdCcsICdmYWRlT3V0UmlnaHQnKTtcclxuICAgIGZvcm1IZWFkZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBlbGVtSGFuZGxlcik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBlbGVtSGFuZGxlcik7XHJcblxyXG4gICAgZWxlbUhhbmRsZXIgPSBoYW5kbGVyLmJpbmQodGhpcywgZm9ybVRleHQsICdmYWRlSW5SaWdodCcsICdmYWRlT3V0TGVmdCcpO1xyXG4gICAgZm9ybVRleHQuc3R5bGUub3BhY2l0eSA9ICcwJztcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBlbGVtSGFuZGxlcik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBlbGVtSGFuZGxlcik7XHJcblxyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbUNhdGVnb3JpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgIGVsZW1IYW5kbGVyID0gaGFuZGxlci5iaW5kKHRoaXMsIGVsZW1DYXRlZ29yaWVzW2ldKTtcclxuICAgIGVsZW1DYXRlZ29yaWVzW2ldLnN0eWxlLm9wYWNpdHkgPSAnMCc7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZWxlbUhhbmRsZXIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZWxlbUhhbmRsZXIpO1xyXG4gIH1cclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1Qb3B1bGFyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBlbGVtSGFuZGxlciA9IGhhbmRsZXIuYmluZCh0aGlzLCBlbGVtUG9wdWxhcltpXSk7XHJcbiAgICBlbGVtUG9wdWxhcltpXS5zdHlsZS5vcGFjaXR5ID0gJzAnO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGVsZW1IYW5kbGVyKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGVsZW1IYW5kbGVyKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZXIoc2F2ZUFyZywgb25lQ2xhc3NJbiwgb25lQ2xhc3NPdXQpIHtcclxuICAgIHZhciBzYXZlQXJnID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xyXG4gICAgdmFyIHNhdmVUaGlzID10aGlzO1xyXG5cclxuICAgIGZ1bmN0aW9uIHN0YXJ0KHNhdmVBcmcsIG9uZUNsYXNzSW4sIG9uZUNsYXNzT3V0KSB7XHJcbiAgICAgIGlmICggaW5EaXNwbGF5KHNhdmVBcmcpICYmIGlzU2hvdyhzYXZlQXJnKSApIHtcclxuXHJcbiAgICAgICAgaWYgKHNhdmVBcmcuZ2V0QXR0cmlidXRlKCdkYXRhLXNpZGUnKSA9PT0gJ2ZhbHNlJykge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzYXZlQXJnLnNldEF0dHJpYnV0ZSgnZGF0YS1zaG93JywnZmFsc2UnKTtcclxuICAgICAgICBhbmltYXRlZChzYXZlQXJnLCBvbmVDbGFzc0luLCBvbmVDbGFzc091dCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9IGVsc2UgaWYgKCAoaXNTaG93KHNhdmVBcmcpID09ICdmYWxzZScpICYmIG91dERpc3BsYXkoc2F2ZUFyZykpIHtcclxuXHJcbiAgICAgICAgIGlmIChzYXZlQXJnLmdldEF0dHJpYnV0ZSgnZGF0YS1zaWRlJykgPT09ICd0cnVlJykge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzYXZlQXJnLnNldEF0dHJpYnV0ZSgnZGF0YS1zaG93JywndHJ1ZScpO1xyXG4gICAgICAgIGFuaW1hdGVkKHNhdmVBcmcsIG9uZUNsYXNzSW4sIG9uZUNsYXNzT3V0KTtcclxuICAgICAgfSByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvL2VsZW0gb24gc2NyZWVuIC0gdHJ1ZSwgZWxzZSBmYWxzZVxyXG4gICAgZnVuY3Rpb24gaW5EaXNwbGF5KGVsZW0pIHtcclxuICAgICAgdmFyIGNvb3JkcyA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIHZhciB0b3BBcmVhID0gZWxlbS5vZmZzZXRIZWlnaHQvNSxcclxuICAgICAgICAgIGJvdHRvbUFyZWEgPSAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCAtIGVsZW0ub2Zmc2V0SGVpZ2h0LzUpLFxyXG4gICAgICAgICAgaGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcclxuXHJcbiAgICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggPCA5OTIpIHtcclxuICAgICAgICByZXR1cm4gY29vcmRzLnRvcCA+PSAwICYmIGNvb3Jkcy5ib3R0b20gPD0gaGVpZ2h0O1xyXG4gICAgICB9IGVsc2UgaWYgKChjb29yZHMudG9wID4gdG9wQXJlYSB8fCBjb29yZHMuYm90dG9tID4gdG9wQXJlYSkgJiYgKGNvb3Jkcy50b3AgPCBib3R0b21BcmVhICkpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSBlbHNlIGlmIChoZWlnaHQgPCBlbGVtLm9mZnNldEhlaWdodCAmJiBjb29yZHMudG9wIDwgMCAmJiBjb29yZHMuYm90dG9tID4gaGVpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb3V0RGlzcGxheShlbGVtKSB7XHJcbiAgICAgIHZhciBjb29yZHMgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICB2YXIgdG9wQXJlYSA9IGVsZW0ub2Zmc2V0SGVpZ2h0LzUsXHJcbiAgICAgICAgICBzdWJUb3BBcmVhID0gLSBlbGVtLm9mZnNldEhlaWdodCwgXHJcbiAgICAgICAgICBib3R0b21BcmVhID0gKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgLSBlbGVtLm9mZnNldEhlaWdodC81KSxcclxuICAgICAgICAgIHN1YkJvdHRvbUFyZWEgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0ICsgZWxlbS5vZmZzZXRIZWlnaHQsXHJcbiAgICAgICAgICBoZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xyXG5cclxuICAgICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCA8IDk5Mikge1xyXG4gICAgICAgIHJldHVybiAoY29vcmRzLnRvcCA8PSAwICYmIGNvb3Jkcy5ib3R0b20gPD0gMCkgfHwgKGNvb3Jkcy50b3AgPj0gaGVpZ2h0ICYmIGNvb3Jkcy5ib3R0b20gPj0gaGVpZ2h0KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIChjb29yZHMuYm90dG9tIDw9IHRvcEFyZWEgfHwgY29vcmRzLnRvcCA+PSBib3R0b21BcmVhKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc1Nob3coZWxlbSkge1xyXG4gICAgICByZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2hvdycpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFuaW1hdGVkKGVsZW0sIG9uZUNsYXNzSW4sIG9uZUNsYXNzT3V0KSB7XHJcbiAgICAgIHZhciBvbmVDbGFzc0luID0gb25lQ2xhc3NJbiB8fCAnZmFkZUluJztcclxuICAgICAgdmFyIG9uZUNsYXNzT3V0ID0gb25lQ2xhc3NPdXQgfHwgJ2ZhZGVPdXQnO1xyXG5cclxuICAgICAgaWYgKGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXNob3cnKSAhPSAndHJ1ZScpIHtcclxuICAgICAgICBzd2l0Y2ggKGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXNpZGUnKSkge1xyXG4gICAgICAgICAgY2FzZSAoJ2xlZnQnKTpcclxuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlZCcpO1xyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2ZhZGVJbkxlZnRCaWcnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgY2FzZSAoJ2NlbnRlcicpOlxyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGVkJyk7XHJcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnZmFkZUluJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIGNhc2UgKCdyaWdodCcpOlxyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGVkJyk7XHJcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnZmFkZUluUmlnaHRCaWcnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKG9uZUNsYXNzSW4pO1xyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXNob3cnKSAhPSAnZmFsc2UnKXtcclxuICAgICAgICBzd2l0Y2ggKGVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXNpZGUnKSkge1xyXG4gICAgICAgICAgY2FzZSAoJ2xlZnQnKTpcclxuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlSW5MZWZ0QmlnJyk7XHJcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnZmFkZU91dExlZnRCaWcnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgY2FzZSAoJ2NlbnRlcicpOlxyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhZGVJbicpO1xyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2ZhZGVPdXQnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgY2FzZSAoJ3JpZ2h0Jyk6XHJcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnZmFkZUluUmlnaHRCaWcnKTtcclxuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdmYWRlT3V0UmlnaHRCaWcnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKG9uZUNsYXNzSW4pO1xyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQob25lQ2xhc3NPdXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzdGFydC5hcHBseShzYXZlVGhpcywgc2F2ZUFyZyk7XHJcbiAgfVxyXG59KSh3aW5kb3csIGRvY3VtZW50KTsiLCIvLyBFdmVudExpc3RlbmVyIHwgQ0MwIHwgZ2l0aHViLmNvbS9qb25hdGhhbnRuZWFsL0V2ZW50TGlzdGVuZXJcclxuXHJcbnRoaXMuRWxlbWVudCAmJiBFbGVtZW50LnByb3RvdHlwZS5hdHRhY2hFdmVudCAmJiAhRWxlbWVudC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciAmJiAoZnVuY3Rpb24gKCkge1xyXG5cdGZ1bmN0aW9uIGFkZFRvUHJvdG90eXBlKG5hbWUsIG1ldGhvZCkge1xyXG5cdFx0V2luZG93LnByb3RvdHlwZVtuYW1lXSA9IEhUTUxEb2N1bWVudC5wcm90b3R5cGVbbmFtZV0gPSBFbGVtZW50LnByb3RvdHlwZVtuYW1lXSA9IG1ldGhvZDtcclxuXHR9XHJcblxyXG5cdC8vIGFkZFxyXG5cdGFkZFRvUHJvdG90eXBlKFwiYWRkRXZlbnRMaXN0ZW5lclwiLCBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcclxuXHRcdHZhclxyXG5cdFx0dGFyZ2V0ID0gdGhpcyxcclxuXHRcdGxpc3RlbmVycyA9IHRhcmdldC5hZGRFdmVudExpc3RlbmVyLmxpc3RlbmVycyA9IHRhcmdldC5hZGRFdmVudExpc3RlbmVyLmxpc3RlbmVycyB8fCB7fSxcclxuXHRcdHR5cGVMaXN0ZW5lcnMgPSBsaXN0ZW5lcnNbdHlwZV0gPSBsaXN0ZW5lcnNbdHlwZV0gfHwgW107XHJcblxyXG5cdFx0Ly8gaWYgbm8gZXZlbnRzIGV4aXN0LCBhdHRhY2ggdGhlIGxpc3RlbmVyXHJcblx0XHRpZiAoIXR5cGVMaXN0ZW5lcnMubGVuZ3RoKSB7XHJcblx0XHRcdHRhcmdldC5hdHRhY2hFdmVudChcIm9uXCIgKyB0eXBlLCB0eXBlTGlzdGVuZXJzLmV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHRcdFx0dmFyIGRvY3VtZW50RWxlbWVudCA9IHRhcmdldC5kb2N1bWVudCAmJiB0YXJnZXQuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IHRhcmdldC5kb2N1bWVudEVsZW1lbnQgfHwgeyBzY3JvbGxMZWZ0OiAwLCBzY3JvbGxUb3A6IDAgfTtcclxuXHJcblx0XHRcdFx0Ly8gcG9seWZpbGwgdzNjIHByb3BlcnRpZXMgYW5kIG1ldGhvZHNcclxuXHRcdFx0XHRldmVudC5jdXJyZW50VGFyZ2V0ID0gdGFyZ2V0O1xyXG5cdFx0XHRcdGV2ZW50LnBhZ2VYID0gZXZlbnQuY2xpZW50WCArIGRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xyXG5cdFx0XHRcdGV2ZW50LnBhZ2VZID0gZXZlbnQuY2xpZW50WSArIGRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7IGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2UgfTtcclxuXHRcdFx0XHRldmVudC5yZWxhdGVkVGFyZ2V0ID0gZXZlbnQuZnJvbUVsZW1lbnQgfHwgbnVsbDtcclxuXHRcdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoKSB7IGltbWVkaWF0ZVByb3BhZ2F0aW9uID0gZmFsc2U7IGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWUgfTtcclxuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoKSB7IGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWUgfTtcclxuXHRcdFx0XHRldmVudC50YXJnZXQgPSBldmVudC5zcmNFbGVtZW50IHx8IHRhcmdldDtcclxuXHRcdFx0XHRldmVudC50aW1lU3RhbXAgPSArbmV3IERhdGU7XHJcblxyXG5cdFx0XHRcdHZhciBwbGFpbkV2dCA9IHt9O1xyXG5cdFx0XHRcdGZvciAodmFyIGkgaW4gZXZlbnQpIHtcclxuXHRcdFx0XHRcdHBsYWluRXZ0W2ldID0gZXZlbnRbaV07XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBjcmVhdGUgYW4gY2FjaGVkIGxpc3Qgb2YgdGhlIG1hc3RlciBldmVudHMgbGlzdCAodG8gcHJvdGVjdCB0aGlzIGxvb3AgZnJvbSBicmVha2luZyB3aGVuIGFuIGV2ZW50IGlzIHJlbW92ZWQpXHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIHR5cGVMaXN0ZW5lcnNDYWNoZSA9IFtdLmNvbmNhdCh0eXBlTGlzdGVuZXJzKSwgdHlwZUxpc3RlbmVyQ2FjaGUsIGltbWVkaWF0ZVByb3BhZ2F0aW9uID0gdHJ1ZTsgaW1tZWRpYXRlUHJvcGFnYXRpb24gJiYgKHR5cGVMaXN0ZW5lckNhY2hlID0gdHlwZUxpc3RlbmVyc0NhY2hlW2ldKTsgKytpKSB7XHJcblx0XHRcdFx0XHQvLyBjaGVjayB0byBzZWUgaWYgdGhlIGNhY2hlZCBldmVudCBzdGlsbCBleGlzdHMgaW4gdGhlIG1hc3RlciBldmVudHMgbGlzdFxyXG5cdFx0XHRcdFx0Zm9yICh2YXIgaWkgPSAwLCB0eXBlTGlzdGVuZXI7IHR5cGVMaXN0ZW5lciA9IHR5cGVMaXN0ZW5lcnNbaWldOyArK2lpKSB7XHJcblx0XHRcdFx0XHRcdGlmICh0eXBlTGlzdGVuZXIgPT0gdHlwZUxpc3RlbmVyQ2FjaGUpIHtcclxuXHRcdFx0XHRcdFx0XHR0eXBlTGlzdGVuZXIuY2FsbCh0YXJnZXQsIHBsYWluRXZ0KTtcclxuXHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGFkZCB0aGUgZXZlbnQgdG8gdGhlIG1hc3RlciBldmVudCBsaXN0XHJcblx0XHR0eXBlTGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG5cdH0pO1xyXG5cclxuXHQvLyByZW1vdmVcclxuXHRhZGRUb1Byb3RvdHlwZShcInJlbW92ZUV2ZW50TGlzdGVuZXJcIiwgZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XHJcblx0XHR2YXJcclxuXHRcdHRhcmdldCA9IHRoaXMsXHJcblx0XHRsaXN0ZW5lcnMgPSB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lci5saXN0ZW5lcnMgPSB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lci5saXN0ZW5lcnMgfHwge30sXHJcblx0XHR0eXBlTGlzdGVuZXJzID0gbGlzdGVuZXJzW3R5cGVdID0gbGlzdGVuZXJzW3R5cGVdIHx8IFtdO1xyXG5cclxuXHRcdC8vIHJlbW92ZSB0aGUgbmV3ZXN0IG1hdGNoaW5nIGV2ZW50IGZyb20gdGhlIG1hc3RlciBldmVudCBsaXN0XHJcblx0XHRmb3IgKHZhciBpID0gdHlwZUxpc3RlbmVycy5sZW5ndGggLSAxLCB0eXBlTGlzdGVuZXI7IHR5cGVMaXN0ZW5lciA9IHR5cGVMaXN0ZW5lcnNbaV07IC0taSkge1xyXG5cdFx0XHRpZiAodHlwZUxpc3RlbmVyID09IGxpc3RlbmVyKSB7XHJcblx0XHRcdFx0dHlwZUxpc3RlbmVycy5zcGxpY2UoaSwgMSk7XHJcblxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gaWYgbm8gZXZlbnRzIGV4aXN0LCBkZXRhY2ggdGhlIGxpc3RlbmVyXHJcblx0XHRpZiAoIXR5cGVMaXN0ZW5lcnMubGVuZ3RoICYmIHR5cGVMaXN0ZW5lcnMuZXZlbnQpIHtcclxuXHRcdFx0dGFyZ2V0LmRldGFjaEV2ZW50KFwib25cIiArIHR5cGUsIHR5cGVMaXN0ZW5lcnMuZXZlbnQpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyBkaXNwYXRjaFxyXG5cdGFkZFRvUHJvdG90eXBlKFwiZGlzcGF0Y2hFdmVudFwiLCBmdW5jdGlvbiAoZXZlbnRPYmplY3QpIHtcclxuXHRcdHZhclxyXG5cdFx0dGFyZ2V0ID0gdGhpcyxcclxuXHRcdHR5cGUgPSBldmVudE9iamVjdC50eXBlLFxyXG5cdFx0bGlzdGVuZXJzID0gdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIubGlzdGVuZXJzID0gdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIubGlzdGVuZXJzIHx8IHt9LFxyXG5cdFx0dHlwZUxpc3RlbmVycyA9IGxpc3RlbmVyc1t0eXBlXSA9IGxpc3RlbmVyc1t0eXBlXSB8fCBbXTtcclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHRyZXR1cm4gdGFyZ2V0LmZpcmVFdmVudChcIm9uXCIgKyB0eXBlLCBldmVudE9iamVjdCk7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRpZiAodHlwZUxpc3RlbmVycy5ldmVudCkge1xyXG5cdFx0XHRcdHR5cGVMaXN0ZW5lcnMuZXZlbnQoZXZlbnRPYmplY3QpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8vIEN1c3RvbUV2ZW50XHJcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KFdpbmRvdy5wcm90b3R5cGUsIFwiQ3VzdG9tRXZlbnRcIiwge1xyXG5cdFx0Z2V0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdHJldHVybiBmdW5jdGlvbiBDdXN0b21FdmVudCh0eXBlLCBldmVudEluaXREaWN0KSB7XHJcblx0XHRcdFx0dmFyIGV2ZW50ID0gc2VsZi5kb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpLCBrZXk7XHJcblxyXG5cdFx0XHRcdGV2ZW50LnR5cGUgPSB0eXBlO1xyXG5cdFx0XHRcdGZvciAoa2V5IGluIGV2ZW50SW5pdERpY3QpIHtcclxuXHRcdFx0XHRcdGlmIChrZXkgPT0gJ2NhbmNlbGFibGUnKXtcclxuXHRcdFx0XHRcdFx0ZXZlbnQucmV0dXJuVmFsdWUgPSAhZXZlbnRJbml0RGljdC5jYW5jZWxhYmxlO1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChrZXkgPT0gJ2J1YmJsZXMnKXtcclxuXHRcdFx0XHRcdFx0ZXZlbnQuY2FuY2VsQnViYmxlID0gIWV2ZW50SW5pdERpY3QuYnViYmxlcztcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoa2V5ID09ICdkZXRhaWwnKXtcclxuXHRcdFx0XHRcdFx0ZXZlbnQuZGV0YWlsID0gZXZlbnRJbml0RGljdC5kZXRhaWw7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBldmVudDtcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0Ly8gcmVhZHlcclxuXHRmdW5jdGlvbiByZWFkeShldmVudCkge1xyXG5cdFx0aWYgKHJlYWR5LmludGVydmFsICYmIGRvY3VtZW50LmJvZHkpIHtcclxuXHRcdFx0cmVhZHkuaW50ZXJ2YWwgPSBjbGVhckludGVydmFsKHJlYWR5LmludGVydmFsKTtcclxuXHJcblx0XHRcdGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiRE9NQ29udGVudExvYWRlZFwiKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZWFkeS5pbnRlcnZhbCA9IHNldEludGVydmFsKHJlYWR5LCAxKTtcclxuXHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIHJlYWR5KTtcclxufSkoKTtcclxuXHJcbighdGhpcy5DdXN0b21FdmVudCB8fCB0eXBlb2YgdGhpcy5DdXN0b21FdmVudCA9PT0gXCJvYmplY3RcIikgJiYgKGZ1bmN0aW9uKCkge1xyXG5cdC8vIEN1c3RvbUV2ZW50IGZvciBicm93c2VycyB3aGljaCBkb24ndCBuYXRpdmVseSBzdXBwb3J0IHRoZSBDb25zdHJ1Y3RvciBtZXRob2RcclxuXHR0aGlzLkN1c3RvbUV2ZW50ID0gZnVuY3Rpb24gQ3VzdG9tRXZlbnQodHlwZSwgZXZlbnRJbml0RGljdCkge1xyXG5cdFx0dmFyIGV2ZW50O1xyXG5cdFx0ZXZlbnRJbml0RGljdCA9IGV2ZW50SW5pdERpY3QgfHwge2J1YmJsZXM6IGZhbHNlLCBjYW5jZWxhYmxlOiBmYWxzZSwgZGV0YWlsOiB1bmRlZmluZWR9O1xyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XHJcblx0XHRcdGV2ZW50LmluaXRDdXN0b21FdmVudCh0eXBlLCBldmVudEluaXREaWN0LmJ1YmJsZXMsIGV2ZW50SW5pdERpY3QuY2FuY2VsYWJsZSwgZXZlbnRJbml0RGljdC5kZXRhaWwpO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Ly8gZm9yIGJyb3dzZXJzIHdoaWNoIGRvbid0IHN1cHBvcnQgQ3VzdG9tRXZlbnQgYXQgYWxsLCB3ZSB1c2UgYSByZWd1bGFyIGV2ZW50IGluc3RlYWRcclxuXHRcdFx0ZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcclxuXHRcdFx0ZXZlbnQuaW5pdEV2ZW50KHR5cGUsIGV2ZW50SW5pdERpY3QuYnViYmxlcywgZXZlbnRJbml0RGljdC5jYW5jZWxhYmxlKTtcclxuXHRcdFx0ZXZlbnQuZGV0YWlsID0gZXZlbnRJbml0RGljdC5kZXRhaWw7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGV2ZW50O1xyXG5cdH07XHJcbn0pKCk7IiwiOyhmdW5jdGlvbiBmdW5jdGlvbl9uYW1lKHdpbmRvdywgZG9jdW1lbnQpIHtcclxuICAndXNlIHN0cmljdCdcclxuXHJcbiAgdmFyIGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2l0ZS1uYXZfX2xpc3QnKTtcclxuICB2YXIgcmVtZWJlckVsZW1lbnQgPSBudWxsO1xyXG4gIHZhciBzdWJNZW51U3RhdHVzID0gZmFsc2U7XHJcblxyXG5cclxuXHJcblxyXG4gIGxpc3QuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgaG92ZXJTaXRlTmF2T3Zlcik7XHJcbiAgbGlzdC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGhvdmVyU2l0ZU5hdk91dCk7IFxyXG5cclxuXHJcbiAgZnVuY3Rpb24gaG92ZXJTaXRlTmF2T3ZlcihldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgdmFyIGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaXRlLW5hdi10b2dnbGUnKTtcclxuICAgIHZhciBzY3JlZW5XaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCA7XHJcblxyXG4vL9C+0YLQvNC10L3Rj9C10YIgaG92ZXIg0L3QsCDQvNC10LTQuNCwIHhzPDc2NVxyXG4gICAgaWYoIHNjcmVlbldpZHRoIDwgNzUwICkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9O1xyXG4gICAgLy/QtdGB0LvQuCDQtNC20LjQstC10L3QuNC1INC60YPRgNGB0L7RgNCwINC90LAg0Y3Qu9C10LzQtdC90YLQtVxyXG4gICAgaWYgKHJlbWViZXJFbGVtZW50KSByZXR1cm47XHJcblxyXG4gICAgd2hpbGUoIHRhcmdldC50YWdOYW1lICE9ICdVTCcgKSB7XHJcbiAgICAgIGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLW5hdi1saScpKSB7XHJcbiAgICAgIFx0dGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5hZGQoJ3NpdGUtbmF2X19saW5rLS1hY3RpdmUnKTtcclxuICAgICAgXHRzdWJNZW51VG9nZ2xlKHRhcmdldCk7XHJcbiAgICAgIFx0YW5pbWF0ZUFkZCh0YXJnZXQsICdmYWRlSW4nKTtcclxuICAgICAgXHRyZW1lYmVyRWxlbWVudCA9IHRhcmdldDtcclxuICAgICAgXHRicmVhaztcclxuICAgICAgfVxyXG4gICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50RWxlbWVudDtcclxuICBcdH1cclxuICB9XHJcbiAgZnVuY3Rpb24gaG92ZXJTaXRlTmF2T3V0KGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIHZhciByZWxhdGVkVGFyZ2V0ID0gZXZlbnQucmVsYXRlZFRhcmdldDtcclxuXHJcbiAgICAvL9C10YHQu9C4INC00LbQuNCy0LXQvdC40LUg0LrRg9GA0YHQvtGA0LAg0L3QsCDRjdC70LXQvNC10L3RgtC1XHJcbiAgICBpZiAoIXJlbWViZXJFbGVtZW50KSByZXR1cm47XHJcblxyXG4gICAgd2hpbGUoIHJlbGF0ZWRUYXJnZXQgKSB7XHJcbiAgICAgIGlmIChyZWxhdGVkVGFyZ2V0ID09IHJlbWViZXJFbGVtZW50KSB7XHJcbiAgICAgIFx0cmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHJlbGF0ZWRUYXJnZXQgPSByZWxhdGVkVGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcbiAgXHR9XHJcbiAgXHQvL9C/0YDQvtC40LfQvtGI0LvQviDRgdC+0LHRi9GC0LjQtVxyXG4gIFx0cmVtZWJlckVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LnJlbW92ZSgnc2l0ZS1uYXZfX2xpbmstLWFjdGl2ZScpO1xyXG4gIFx0c3ViTWVudVRvZ2dsZShyZW1lYmVyRWxlbWVudCk7XHJcbiAgXHRhbmltYXRlUmVtb3ZlKHJlbWViZXJFbGVtZW50LCAnZmFkZUluJyk7XHJcbiAgXHRyZW1lYmVyRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzdWJNZW51VG9nZ2xlKHBhcmVudCkge1xyXG4gIFx0dmFyIGkgPSAwO1xyXG5cclxuXHJcbiAgXHRpZiAoIXN1Yk1lbnVTdGF0dXMpIHtcclxuICBcdCAgd2hpbGUoIHBhcmVudC5jaGlsZHJlbltpXSApIHtcclxuICAgICAgICBpZiAocGFyZW50LmNoaWxkcmVuW2ldLnRhZ05hbWUgPT0gJ1VMJykge1xyXG4gICAgICBcdCAgcGFyZW50LmNoaWxkcmVuW2ldLmNsYXNzTGlzdC5hZGQoJ3NpdGUtbmF2X19zdWItbGlzdC0tYWN0aXZlJyk7XHJcbiAgICAgIFx0ICBzdWJNZW51U3RhdHVzID0gdHJ1ZTtcclxuICAgICAgXHQgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpKys7XHJcbiAgXHQgIH1cclxuICBcdH0gZWxzZSB7XHJcbiAgXHQgIHdoaWxlKCBwYXJlbnQuY2hpbGRyZW5baV0gKSB7XHJcbiAgICAgICAgaWYgKHBhcmVudC5jaGlsZHJlbltpXS50YWdOYW1lID09ICdVTCcpIHtcclxuICAgICAgXHQgIHBhcmVudC5jaGlsZHJlbltpXS5jbGFzc0xpc3QucmVtb3ZlKCdzaXRlLW5hdl9fc3ViLWxpc3QtLWFjdGl2ZScpO1xyXG4gICAgICBcdCAgc3ViTWVudVN0YXR1cyA9IGZhbHNlO1xyXG4gICAgICBcdCAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGkrKztcclxuICBcdCAgfVx0XHJcbiAgXHR9XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIGFuaW1hdGVBZGQoZWxlbSwgYW5pbWF0ZU5hbWUpIHtcclxuICBcdGVsZW0uY2xhc3NMaXN0LmFkZChhbmltYXRlTmFtZSk7XHJcbiAgXHRlbGVtLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGVkJyk7XHJcbiAgICBcclxuICAgIFxyXG4gIH1cclxuICBmdW5jdGlvbiBhbmltYXRlUmVtb3ZlKGVsZW0sIGFuaW1hdGVOYW1lKSB7XHJcbiAgXHRlbGVtLmNsYXNzTGlzdC5yZW1vdmUoYW5pbWF0ZU5hbWUpO1xyXG4gIH1cclxufSkod2luZG93LCBkb2N1bWVudCk7XHJcblxyXG5cclxuIiwiOyhmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCkge1xyXG4gICd1c2Ugc3RyaWN0J1xyXG5cclxuICB2YXIgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpdGUtbmF2LXRvZ2dsZScpO1xyXG4gIHZhciBsaXN0ID1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2l0ZS1uYXYtbGlzdCcpO1xyXG5cclxuXHJcbiAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlcik7XHJcblxyXG4gIGZ1bmN0aW9uIGhhbmRsZXIoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuLy9saXN0LW5hdlxyXG4gICAgdmFyIHJlbW92ZUxpc3RBbmltYXRlID0gcmVtb3ZlQW5pbWF0aW9uKDcwMCk7XHJcbiAgICB2YXIgcmVtb3ZlRGl2QW5pbWF0ZSA9IHJlbW92ZUFuaW1hdGlvbig3MDApO1xyXG5cclxuXHJcbiAgICB0aGlzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnRvZ2dsZSgnc2l0ZS1uYXZfX2xpc3QtLWhpZGRlbi1zbScpO1xyXG4gICAgdGhpcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC50b2dnbGUoJ2FuaW1hdGVkJyk7XHJcbiAgICB0aGlzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnRvZ2dsZSgnZmFkZUluUmlnaHQtLXNpdGUtbmF2Jyk7XHJcbiAgICByZW1vdmVMaXN0QW5pbWF0ZSh0aGlzLnByZXZpb3VzRWxlbWVudFNpYmxpbmcsJ2ZhZGVJblJpZ2h0LS1zaXRlLW5hdicpO1xyXG4vL3RvZ2dsZVxyXG4gICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKCdhbmltYXRlZCcpO1xyXG4gICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKCdwdWxzZS0tc2l0ZS1uYXYnKTtcclxuICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZSgnc2l0ZS1uYXZfX3RvZ2dsZS0tYWN0aXZlJyk7XHJcbiAgICByZW1vdmVEaXZBbmltYXRlKHRoaXMsJ3B1bHNlLS1zaXRlLW5hdicpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUFuaW1hdGlvbih0aW1lcikge1xyXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGFyZywgc3RyKSB7XHJcbiAgICAgICAgdmFyIHNhdmVUaGlzID0gdGhpcztcclxuICAgICAgICAgIHZhciBzYXZlQXJnID0gYXJndW1lbnRzO1xyXG4gICAgICAgIHNldFRpbWVvdXQgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgZi5hcHBseShzYXZlVGhpcywgc2F2ZUFyZylcclxuICAgICAgICB9LCB0aW1lcik7XHJcbiAgICAgIH07XHJcbiAgICAgIGZ1bmN0aW9uIGYoYXJnLCBzdHIpIHtcclxuICAgICAgIGFyZy5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlZCcpO1xyXG4gICAgICAgYXJnLmNsYXNzTGlzdC5yZW1vdmUoIHN0ciApO1xyXG4gICAgICB9OyBcclxuICAgIH1cclxuICB9XHJcbn0pKHdpbmRvdywgZG9jdW1lbnQpOyIsIjsoZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQpIHtcclxuICAndXNlIHN0cmljdCdcclxuLy9FdmVudHMgc3RhdGVtZW50cyBvbiBjb250ZW50TG9hZGVkXHJcbiAgdmFyIHNsaWRlckhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXItaGVhZGVyX19oZWFkZXInKSxcclxuICAgICAgc2xpZGVyVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXItaGVhZGVyX190ZXh0JyksXHJcbiAgICAgIHNsaWRlckJ0blN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXItaGVhZGVyX19idG4nKSxcclxuICAgICAgc2xpZGVyVGFicyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXItaGVhZGVyX190b2dnbGUnKSxcclxuICAgICAgYXJyQ29udGVudEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2lkXj1zbGlkZXItaGVhZGVyX19jb250ZW50LV0nKTtcclxuXHJcblxyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWRlclRhYnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgc2xpZGVyVGFic1tpXS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlZCcpO1xyXG4gICAgICBzbGlkZXJUYWJzW2ldLmNsYXNzTGlzdC5hZGQoJ2ZhZGVJbkRvd25CaWcnKTtcclxuICAgICAgc2xpZGVyVGFic1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbnRlbnRQcmV2TmV4dFRvZ2dsZSk7XHJcbiAgICAgIHNsaWRlclRhYnNbaV0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhZGVJbkRvd25CaWcnKTsgXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWRlckhlYWRlci5sZW5ndGg7IGkrKykge1xyXG4gICAgICBzbGlkZXJIZWFkZXJbaV0uY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZWQnKTtcclxuICAgICAgc2xpZGVySGVhZGVyW2ldLmNsYXNzTGlzdC5hZGQoJ2ZhZGVJbkRvd24nKTsgXHJcbiAgICB9IFxyXG4gIH0pO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGlkZXJUZXh0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHNsaWRlclRleHRbaV0uY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZWQnKTtcclxuICAgICAgc2xpZGVyVGV4dFtpXS5jbGFzc0xpc3QuYWRkKCdmYWRlSW5VcCcpOyBcclxuICAgIH0gXHJcbiAgfSk7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpZGVyQnRuU3VibWl0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHNsaWRlckJ0blN1Ym1pdFtpXS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlZCcpO1xyXG4gICAgICBzbGlkZXJCdG5TdWJtaXRbaV0uY2xhc3NMaXN0LmFkZCgnZmFkZUluVXAnKTsgXHJcbiAgICB9IFxyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiBjb250ZW50UHJldk5leHRUb2dnbGUoZXZlbnQpIHtcclxuXHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVyLWhlYWRlcl9fdG9nZ2xlLS1uZXh0JykpIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJDb250ZW50RWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoICFhcnJDb250ZW50RWxlbWVudHNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZXItaGVhZGVyX19jb250ZW50LS1oaWRkZW4nKSAmJiAoaSA9PT0gYXJyQ29udGVudEVsZW1lbnRzLmxlbmd0aCAtIDEpICkge1xyXG4gICAgICAgICAgYXJyQ29udGVudEVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1oZWFkZXJfX2NvbnRlbnQtLWhpZGRlbicpO1xyXG4gICAgICAgICAgYXJyQ29udGVudEVsZW1lbnRzWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlci1oZWFkZXJfX2NvbnRlbnQtLWhpZGRlbicpO1xyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfSBlbHNlIGlmICghYXJyQ29udGVudEVsZW1lbnRzW2ldLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVyLWhlYWRlcl9fY29udGVudC0taGlkZGVuJykpIHtcclxuICAgICAgICAgIGFyckNvbnRlbnRFbGVtZW50c1tpXS5jbGFzc0xpc3QuYWRkKCdzbGlkZXItaGVhZGVyX19jb250ZW50LS1oaWRkZW4nKTtcclxuICAgICAgICAgIGFyckNvbnRlbnRFbGVtZW50c1srK2ldLmNsYXNzTGlzdC5yZW1vdmUoJ3NsaWRlci1oZWFkZXJfX2NvbnRlbnQtLWhpZGRlbicpO1xyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZXItaGVhZGVyX190b2dnbGUtLXByZXYnKSkge1xyXG4gICAgICBmb3IgKHZhciBpID0gYXJyQ29udGVudEVsZW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgaWYgKCAhYXJyQ29udGVudEVsZW1lbnRzW2ldLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVyLWhlYWRlcl9fY29udGVudC0taGlkZGVuJykgJiYgKGkgPT09IDApICkge1xyXG4gICAgICAgICAgYXJyQ29udGVudEVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1oZWFkZXJfX2NvbnRlbnQtLWhpZGRlbicpO1xyXG4gICAgICAgICAgYXJyQ29udGVudEVsZW1lbnRzW2FyckNvbnRlbnRFbGVtZW50cy5sZW5ndGggLSAxXS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXItaGVhZGVyX19jb250ZW50LS1oaWRkZW4nKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9IGVsc2UgaWYgKCEoYXJyQ29udGVudEVsZW1lbnRzW2ldLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVyLWhlYWRlcl9fY29udGVudC0taGlkZGVuJykpKSB7XHJcbiAgICAgICAgICBhcnJDb250ZW50RWxlbWVudHNbaV0uY2xhc3NMaXN0LmFkZCgnc2xpZGVyLWhlYWRlcl9fY29udGVudC0taGlkZGVuJyk7XHJcbiAgICAgICAgICBhcnJDb250ZW50RWxlbWVudHNbLS1pXS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXItaGVhZGVyX19jb250ZW50LS1oaWRkZW4nKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG59KSh3aW5kb3csIGRvY3VtZW50KTtcclxuIl19
